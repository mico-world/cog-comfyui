build:
  gpu: true
  cuda: "12.1"
  system_packages:
    - ffmpeg
    - build-essential      # gcc、make 等
    - libcairo2-dev        # cairo 开发库
    - pkg-config           # 编译时用
    - python3-dev          # Python 头文件
    - meson
    - ninja-build
  python_version: "3.12"
  python_requirements: requirements.txt
  run:
    - curl -o /usr/local/bin/pget -L "https://github.com/replicate/pget/releases/latest/download/pget_$(uname -s)_$(uname -m)" && chmod +x /usr/local/bin/pget
    - pip install onnxruntime-gpu --extra-index-url https://aiinfra.pkgs.visualstudio.com/PublicPackages/_packaging/onnxruntime-cuda-12/pypi/simple/
    - pip install svglib
image: "r8.im/mico-world/cog-comfy"
predict: "predict.py:Predictor"
